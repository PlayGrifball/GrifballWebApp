<div class="password-reset-container">
  <mat-card class="password-reset-card">
    <mat-card-header>
      <mat-card-title>Reset Your Password</mat-card-title>
      <mat-card-subtitle>Enter your new password below</mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <form class="password-reset-form" #resetForm="ngForm" (ngSubmit)="onSubmit()">
        <mat-form-field class="full-width">
          <mat-label>New Password</mat-label>
          <input matInput 
                 [type]="hide ? 'password' : 'text'" 
                 required 
                 minlength="6"
                 [(ngModel)]="model.newPassword" 
                 name="newPassword">
          <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" type="button">
            <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <app-error-message [control]="resetForm.controls['newPassword']" />
        </mat-form-field>

        <mat-form-field class="full-width">
          <mat-label>Confirm New Password</mat-label>
          <input matInput 
                 [type]="hideConfirm ? 'password' : 'text'" 
                 required 
                 minlength="6"
                 [(ngModel)]="model.confirmPassword" 
                 name="confirmPassword">
          <button mat-icon-button matSuffix (click)="hideConfirm = !hideConfirm" [attr.aria-label]="'Hide password'" type="button">
            <mat-icon>{{hideConfirm ? 'visibility_off' : 'visibility'}}</mat-icon>
          </button>
          <app-error-message [control]="resetForm.controls['confirmPassword']" />
        </mat-form-field>

        <div class="actions">
          <button mat-flat-button 
                  color="primary" 
                  type="submit"
                  [disabled]="!resetForm.form.valid || isLoading">
            @if (isLoading) {
              Resetting Password...
            } @else {
              Reset Password
            }
          </button>
          
          <button mat-button 
                  type="button"
                  routerLink="/login">
            Back to Login
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>